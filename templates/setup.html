{% extends "base.html" %}
{% block content %}
<h3 class="mb-3">Setup Job Feed</h3>

<form method="POST" novalidate>
  <div class="row g-3">
    <div class="col-md-7">
      <label class="form-label">Feed URL</label>
      <input
        name="feed_url"
        type="url"
        class="form-control"
        placeholder="https://example.com/jobs.xml"
        value="{{ config.feed_url or '' }}"
        required
      >
      <div class="form-text">Public XML feed URL to fetch and filter.</div>
    </div>

    <div class="col-md-3">
      <label class="form-label">CPC Threshold</label>
      <input
        name="cpc_threshold"
        type="number"
        step="0.01"
        min="0"
        class="form-control"
        value="{{ config.cpc_threshold or 0 }}"
        required
      >
      <div class="form-text">Only keep jobs with CPC ≥ this value.</div>
    </div>

    <div class="col-md-2">
      <label class="form-label">Interval (hours)</label>
      <input
        name="interval"
        type="number"
        min="1"
        max="8760"
        class="form-control"
        value="{{ config.interval or 1 }}"
        required
      >
      <div class="form-text">How often to re-run (1–8760).</div>
    </div>
  </div>

  <button class="btn btn-success mt-3" type="submit">Save & Run Now</button>
</form>

<hr class="my-4"/>

<div class="row g-3">
  <div class="col-md-4">
    <div class="card p-3">
      <div class="small text-muted">Current Feed URL</div>
      <div class="stat-value text-break">{{ config.feed_url or "—" }}</div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card p-3">
      <div class="small text-muted">Current Threshold</div>
      <div class="stat-value text-break">{{ config.cpc_threshold or 0 }}</div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card p-3">
      <div class="small text-muted">Next Run</div>
      <div class="stat-value text-break">{{ config.next_run or "—" }}</div>
    </div>
  </div>
</div>
{% endblock %}
